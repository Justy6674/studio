# ğŸ’§ Water4WeightLoss â€” HydrateAI App

A comprehensive hydration tracking application built for Australians, focusing on using proper hydration to support fat metabolism and healthy, AI-supported weight loss.

## ğŸ¯ Core Features

- **User Authentication**: Firebase Auth for secure access
- **Hydration Logging**: Timestamped water intake tracking with visual glass display
- **AI-Powered Motivation**: Daily motivational messages generated by Gemini AI
- **SMS Reminders**: Scheduled Twilio SMS with customisable tone preferences
- **Streak Tracking**: Daily and longest streak monitoring
- **Progress Visualisation**: Interactive water glass and progress charts
- **Dashboard Analytics**: Weekly intake charts and recent activity logs

## ğŸ¨ Design System

- **Primary Colour**: `#5271ff` (vibrant blue-purple for interactive elements)
- **Background**: `#1e293b` (dark slate gray - 20% desaturated)
- **Accent Colour**: `#b68a71` (warm brown for borders and highlights)
- **Typography**: Accessible cream tones with consistent iconography
- **Animations**: Subtle water effects (ripple, shimmer) for engaging feedback

## ğŸ’° Monetisation

- **Subscription**: $4.99 AUD/month via Stripe
- **Gated Features**: Account management, AI coaching, and Twilio SMS behind authentication

## ğŸ›  Tech Stack

- **Frontend**: Next.js 15 on Replit
- **Backend**: Firebase (Auth, Firestore, Functions, Analytics)
- **AI Integration**: Gemini AI for motivational content and insights
- **SMS Service**: Twilio with user tone preferences
- **Styling**: Tailwind CSS with custom theme
- **Charts**: Recharts for data visualisation

---

## ğŸ“‹ Firebase Functions Architecture

### Expected Functions (`/functions/src/`)

#### 1. **logHydration**
- **Type**: HTTPS Callable
- **Purpose**: Store hydration log entries
- **Input**: `{ userId: string, method: string, amount: number, timestamp: string }`
- **Output**: `{ success: boolean }`
- **Firestore Path**: `hydration_logs/{userId}/{date}`

#### 2. **getHydrationLogs**
- **Type**: HTTPS Callable
- **Purpose**: Fetch hydration history for date ranges
- **Input**: `{ userId: string, dateRange: { start: string, end: string } }`
- **Output**: `{ logs: HydrationLog[] }`

#### 3. **getDailyHydrationSummary**
- **Type**: HTTPS Callable
- **Purpose**: Return daily streak, average intake, and dashboard data
- **Input**: `{ userId: string }`
- **Output**: `{ streak: number, averageIntake: number, dailyTotal: number }`

#### 4. **generateMotivationalMessage**
- **Type**: HTTPS Callable
- **Purpose**: AI-powered motivational support via Gemini
- **Input**: `{ userId: string, hydrationTotal: number, goal: number, tone: string }`
- **Output**: `{ message: string }`

#### 5. **sendSMSReminder**
- **Type**: HTTPS Callable
- **Purpose**: Trigger Twilio SMS with user preferences
- **Input**: `{ userId: string, tone: "funny" | "supportive" | "crass" | "kind" | "weightloss" }`
- **Output**: `{ success: boolean }`

#### 6. **updateUserSettings**
- **Type**: HTTPS Callable
- **Purpose**: Store user preferences for reminders and AI messaging
- **Input**: `UserSettings`
- **Output**: `{ updated: boolean }`
- **Firestore Path**: `user_preferences/{userId}`

#### 7. **getUserSettings**
- **Type**: HTTPS Callable
- **Purpose**: Retrieve complete settings object
- **Input**: `{ userId: string }`
- **Output**: `UserSettings`

#### 8. **handleBillingWebhook**
- **Type**: HTTP Endpoint
- **Purpose**: Stripe webhook handler for subscription management
- **Input**: Stripe event (auto-parsed)
- **Output**: 200 OK or error response

#### 9. **generateHydrationGoalInsight**
- **Type**: HTTPS Callable
- **Purpose**: AI-generated weekly hydration insights
- **Input**: `{ userId: string, hydrationPattern: number[], weekStart: string }`
- **Output**: `{ insight: string }`

---

## ğŸ—„ Firestore Data Structure

```
hydration_logs/{userId}/{timestamp}
â”œâ”€â”€ amount: number
â”œâ”€â”€ method: string
â””â”€â”€ moodTag: string

user_preferences/{userId}
â”œâ”€â”€ aiTone: string
â”œâ”€â”€ hydrationGoal: number
â”œâ”€â”€ smsReminderOn: boolean
â””â”€â”€ aiMessagesOn: boolean

users/{userId}
â”œâ”€â”€ email: string
â”œâ”€â”€ tier: string
â”œâ”€â”€ createdAt: timestamp
â”œâ”€â”€ lastLogin: timestamp
â””â”€â”€ name: string

analytics_events/{eventId}
â”œâ”€â”€ userId: string
â”œâ”€â”€ type: string
â”œâ”€â”€ timestamp: timestamp
â””â”€â”€ metadata: object
```

---

## ğŸš€ Future Functionality Roadmap

- **Bluetooth Integration**: Smart water bottle sync via `device_connections`
- **Voice Commands**: Voice-activated hydration logging
- **Visual Gamification**: Droplet animations and interactive streak boards
- **AI Goal Adjustment**: Dynamic hydration targets based on patterns
- **Multi-Channel Notifications**: WhatsApp, email, and push notifications
- **Social Features**: Anonymous hydration leaderboards
- **Biometric Auth**: Face/voice login via WebAuthn
- **Mobile PWA**: Progressive web app with offline capabilities

---

## ğŸ”§ Development Notes

### Security & Authentication
- **Always** verify user authentication before function execution
- Use Firebase Auth context for all user-specific operations

### Localisation
- Use Australian spelling and metric units (ml, not oz)
- All currency in AUD

### Code Standards
- Follow existing component patterns in `/src/components/`
- Maintain TypeScript strict typing
- Use the established colour palette and design system

### Deployment
- Hosted on Replit with automatic scaling
- Firebase Functions handle all backend logic
- Environment variables managed via Replit Secrets

---

## ğŸ“¦ Getting Started

1. **Install Dependencies**
   ```bash
   npm install
   ```

2. **Set Environment Variables**
   - Configure Firebase credentials in Replit Secrets
   - Add Twilio API keys
   - Set up Gemini AI integration

3. **Run Development Server**
   ```bash
   npm run dev -- --port 3000 --hostname 0.0.0.0
   ```

4. **Deploy Functions**
   ```bash
   cd functions && npm run deploy
   ```

---

*Built with â¤ï¸ for healthy hydration habits in Australia*
